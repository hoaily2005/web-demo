<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://kit.fontawesome.com/de27554dbd.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/register.css" class="">
    <title>Register</title>
</head>

<body class="bg-gradient-primary">

    <div class="container">

        <div class="card o-hidden border-0 shadow-lg my-5">
            <div class="card-body p-0">
                <div class="row">
                    <div class="col-lg-5 d-none d-lg-block bg-register-image">
                        <div class="text-center">
                            <h1 class="h4 text-gray-900 mb-4">Zay shop</h1>
                            <p class="error-style" id="error">
                                We bring you 100% free CSS templates for your websites. If you wish to support
                                TemplateMo, please make a small contribution via PayPal or tell your friends about our
                                website. Thank you.
                            </p>
                            <span class="error-style">
                                Have an account?
                            </span>
                            <a href="login.html" class="btn btn-primary btn-user mt-2">Login</a>
                        </div>
                    </div>
                    <div class="col-lg-7">
                        <div class="p-5">
                            <div class="text-center">
                                <h1 class="h4 text-gray-900 mb-4">Create an Account!</h1>
                            </div>
                            <form class="user" onsubmit="xuLyDangKy(event)">
                                <div class="form-group">
                                    <input type="text" name="fullname" class="form-control form-control-user"
                                        id="exampleFullName" placeholder="Full Name">
                                    <p class='error-style' id='fullname-error'></p>
                                </div>
                                <div class="form-group">
                                    <input type="text" name="username" class="form-control form-control-user"
                                        id="exampleName" placeholder="Enter Username">
                                    <p class='error-style' id='username-error'></p>
                                </div>
                                <div class="form-group">
                                    <input type="email" name="email" class="form-control form-control-user"
                                        id="exampleInputEmail" placeholder="Email Address">
                                    <p class='error-style' id='email-error'></p>
                                </div>
                                <div class="form-group">
                                    <input type="password" name="password" class="form-control form-control-user"
                                        id="exampleInputPassword" placeholder="Password">
                                    <p class='error-style' id='password-error'></p>
                                </div>
                                <div class="form-group">
                                    <input type="password" name="confirm-password"
                                        class="form-control form-control-user" id="exampleConfirmPassword"
                                        placeholder="Confirm Password">
                                    <p class='error-style' id='confirm-password-error'></p>
                                </div>
                                <div class="form-group">
                                    <input type="date" name="dob" class="form-control form-control-user"
                                        id="exampleInputDate" placeholder="Date of Birth">
                                    <p class='error-style' id='dob-error'></p>
                                </div>
                                <div class="form-group">
                                    <input type="tel" name="phone" class="form-control form-control-user"
                                        id="examplePhone" placeholder="Phone Number">
                                    <p class='error-style' id='phone-error'></p>
                                </div>
                                <div class="form-group d-flex justify-content-center">
                                    <input class="btn btn-primary btn-user" type="submit" name="submit"
                                        value="Register Account" />
                                </div>
                                <hr>
                                <a href="index.html" class="btn btn-google btn-user btn-block">
                                    <i class="fab fa-google fa-fw"></i> Register with Google
                                </a>
                                <a href="index.html" class="btn btn-facebook btn-user btn-block">
                                    <i class="fab fa-facebook-f fa-fw"></i> Register with Facebook
                                </a>
                            </form>
                            <hr>
                            <div class="text-center">
                                <a class="small" href="forgot-password.html">Forgot Password ?</a>
                            </div>
                            <div class="text-center">
                                <a href="login.html" class="small">Login Here ?</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // Xử lý Đăng Ký
        function xuLyDangKy(event) {
            event.preventDefault();

            // Lấy dữ liệu người dùng nhập
            let fullname = document.getElementById("exampleFullName").value;
            let username = document.getElementById("exampleName").value;
            let email = document.getElementById("exampleInputEmail").value;
            let password = document.getElementById("exampleInputPassword").value;
            let confirmPassword = document.getElementById("exampleConfirmPassword").value;
            let dob = document.getElementById("exampleInputDate").value;
            let phone = document.getElementById("examplePhone").value;

            // Reset lỗi
            document.getElementById("fullname-error").innerText = "";
            document.getElementById("username-error").innerText = "";
            document.getElementById("email-error").innerText = "";
            document.getElementById("password-error").innerText = "";
            document.getElementById("confirm-password-error").innerText = "";
            document.getElementById("dob-error").innerText = "";
            document.getElementById("phone-error").innerText = "";

            // Kiểm tra nếu chưa nhập thông tin cần thiết
            let isValid = true;

            if (fullname.trim() === "") {
                document.getElementById("fullname-error").innerText = "Please enter your first and last name.";
                isValid = false;
            } else if (fullname.length > 30) {
                document.getElementById("fullname-error").innerText = "Full name cannot exceed 30 characters.";
                isValid = false;
            }

            if (username.trim() === "") {
                document.getElementById("username-error").innerText = "Please enter your username.";
                isValid = false;
            } else if (username.length > 15) {
                document.getElementById("username-error").innerText = "Username cannot exceed 15 characters.";
                isValid = false;
            }

            if (email.trim() === "") {
                document.getElementById("email-error").innerText = "Please enter your email address.";
                isValid = false;
            } else if (!/^\S+@\S+\.\S+$/.test(email)) {
                document.getElementById("email-error").innerText = "Invalid email address.";
                isValid = false;
            }

            if (password.trim() === "") {
                document.getElementById("password-error").innerText = "Please enter your password.";
                isValid = false;
            } else {
                let regex = /(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})/;
                if (!regex.test(password)) {
                    document.getElementById("password-error").innerText = "Password must contain at least 8 characters, including uppercase, lowercase, number, and special character.";
                    isValid = false;
                }
            }

            if (confirmPassword.trim() === "") {
                document.getElementById("confirm-password-error").innerText = "Please confirm your password.";
                isValid = false;
            } else if (password !== confirmPassword) {
                document.getElementById("confirm-password-error").innerText = "Confirmation password does not match.";
                isValid = false;
            }

            if (dob.trim() === "") {
                document.getElementById("dob-error").innerText = "Please enter date of birth.";
                isValid = false;
            }
            if (phone.trim() === "") {
                document.getElementById("phone-error").innerText = "Please enter your phone number.";
                isValid = false;
            } else if (!/^0\d{9}$/.test(phone)) {
                document.getElementById("phone-error").innerText = "*Invalid phone number.";
                isValid = false;
            }


            if (!isValid) {
                return;
            }

            // Lưu thông tin vào localStorage
            const userData = {
                fullname: fullname,
                username: username,
                email: email,
                password: password,
                dob: dob,
                phone: phone
            };

            localStorage.setItem('userData', JSON.stringify(userData));

            alert("Register successfully");
            // Chuyển hướng sau khi đăng ký thành công
            location.href = "login.html";
        }
    </script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    
</body>

</html>
